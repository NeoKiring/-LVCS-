# ローカルバージョン管理システム (LVCS)

Windows 11向けのシンプルで高機能なローカルバージョン管理システム。コードや文書の変更履歴を効率的に管理し、柔軟な開発ワークフローを実現します。

## 特徴

- ファイルの変更履歴の記録と追跡
- コミット、ブランチ、マージなどの基本的なバージョン管理機能
- 直感的なコマンドラインインターフェース (CLI)
- タブ形式で操作できる使いやすいグラフィカルインターフェース (GUI)
- シンプルなリポジトリ構造で理解しやすい
- ローカル環境で完結した高速な動作
- Python製で拡張性が高い

## システム要件

- **OS**: Windows 11
- **言語**: Python 3.8以上
- **依存ライブラリ**: tkinter (GUIモード使用時)

## インストール方法

### リポジトリのクローン

```bash
git clone https://github.com/yourusername/lvcs.git
cd lvcs
```

### インストール

```bash
pip install -e .
```

インストールが完了すると、`lvcs`（CLI用）と`lvcs-gui`（GUI用）の両方のコマンドが使用可能になります。

## 基本的な使用方法

### リポジトリの初期化

```bash
cd your-project-directory
lvcs init
```

### ユーザー設定

```bash
lvcs config --name "あなたの名前" --email "あなたのメール@example.com"
```

### ファイルの追加とコミット

```bash
# ファイルをステージングエリアに追加
lvcs add filename.txt

# すべての変更ファイルを追加
lvcs add .

# 変更をコミット
lvcs commit -m "初回コミット"
```

### 変更履歴の確認

```bash
# リポジトリの状態を確認
lvcs status

# コミット履歴を表示
lvcs log

# ファイルの変更点を表示
lvcs diff filename.txt
```

### ブランチ操作

```bash
# 新しいブランチを作成
lvcs branch feature-branch

# ブランチを切り替え
lvcs checkout feature-branch

# 変更を加えてコミット
lvcs add .
lvcs commit -m "新機能の追加"

# メインブランチに戻る
lvcs checkout master

# ブランチをマージ
lvcs merge feature-branch
```

## GUI モード

グラフィカルインターフェースを使用するには、以下のコマンドを実行します：

```bash
lvcs-gui
```

GUI版は次の4つのタブで構成されています：

1. **ステータス**: ファイルの変更状態を確認、追加、差分表示
2. **コミット**: ステージングされた変更をコミット
3. **履歴**: コミット履歴を表示
4. **ブランチ**: ブランチの作成、切り替え、マージ

## コマンド一覧

| コマンド | 説明 | 使用例 |
|----------|------|--------|
| `init` | 新しいリポジトリを初期化 | `lvcs init` |
| `config` | リポジトリの設定を変更 | `lvcs config --name "名前" --email "メール"` |
| `add` | ファイルをステージングエリアに追加 | `lvcs add ファイル名.txt` |
| `status` | リポジトリの状態を表示 | `lvcs status` |
| `commit` | ステージングされた変更をコミット | `lvcs commit -m "メッセージ"` |
| `log` | コミット履歴を表示 | `lvcs log` |
| `diff` | 変更の差分を表示 | `lvcs diff ファイル名.txt` |
| `branch` | ブランチを作成、削除、または一覧表示 | `lvcs branch 新ブランチ名` |
| `checkout` | ブランチをチェックアウト | `lvcs checkout ブランチ名` |
| `merge` | 指定したブランチを現在のブランチにマージ | `lvcs merge ブランチ名` |
| `reset` | ファイルをリセットまたはインデックスをクリア | `lvcs reset ファイル名.txt` |

## システム構成

```
lvcs/
├── repository.py   # コアバージョン管理機能
├── cli.py          # コマンドラインインターフェース
├── gui.py          # グラフィカルユーザーインターフェース
├── vcs.py          # CLIエントリーポイント
├── vcs_gui.py      # GUIエントリーポイント
└── setup.py        # インストール用スクリプト
```

## リポジトリ内部構造

```
作業ディレクトリ/
├── .lvcs/                  # バージョン管理情報を格納するディレクトリ
│   ├── HEAD                # 現在のブランチを指すポインタファイル
│   ├── config              # リポジトリの設定ファイル（ユーザー情報など）
│   ├── index               # ステージングエリア情報を格納するファイル
│   ├── objects/            # オブジェクト（ファイル、コミット、ツリー）を格納するディレクトリ
│   └── refs/               # 参照情報を格納するディレクトリ
│       └── heads/          # ブランチ情報を格納するディレクトリ
└── ... (作業ファイル)
```

## 拡張性

このバージョン管理システムは以下の機能で拡張できます：

- リモートリポジトリのサポート
- より高度なマージ戦略（三方向マージ）
- コンフリクト解決ツール
- タグ機能
- スタッシュ機能
- より詳細な差分表示
- フック機能

## トラブルシューティング

### コマンドが見つからない

```
'lvcs' は内部コマンドまたは外部コマンド、操作可能なプログラムまたはバッチファイルとして認識されていません。
```

**解決策**：
- Python とパッケージがパスに正しく設定されているか確認します。
- インストールを再実行してみてください：`pip install -e .`

### コミットができない

```
エラー: コミットするためのステージングされた変更はありません
```

**解決策**：
- `lvcs add` コマンドでファイルをステージングエリアに追加してから再試行してください。
- `lvcs status` で現在の状態を確認してください。

### GUIが起動しない

```
_tkinter モジュールがロードできません
```

**解決策**：
- Python に tkinter がインストールされていることを確認します。
- Windows では、Python インストーラーの「オプション機能」で「tcl/tk と IDLE」を選択して再インストールします。

## ライセンス

MIT

## 参考資料

より詳細な情報は、公式ドキュメントを参照してください。

```bash
# ヘルプを表示
lvcs --help
```

---

© 2025 LVCS 開発チーム
